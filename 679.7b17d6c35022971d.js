"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[679],{679:(F,v,l)=>{l.r(v),l.d(v,{CreateTravelPageModule:()=>P});var g=l(177),a=l(4341),n=l(4742),p=l(70),d=l(467),e=l(3953),m=l(3656),f=l(3837);function j(o,s){if(1&o&&(e.j41(0,"ion-select-option",33),e.EFF(1),e.k0s()),2&o){const c=s.$implicit;e.Y8G("value",c.nombre),e.R7$(),e.JRh(c.nombre)}}const h=[{path:"",component:(()=>{var o;class s{constructor(r,t,i,u){this.alertController=r,this.formBuilder=t,this.router=i,this.dataService=u,this.navController=(0,e.WQX)(m.q9),this.sedes=[],this.crearViajeForm=this.formBuilder.group({salida:["",a.k0.required],destino:["",a.k0.required],hora:["",[a.k0.required,this.validarHora.bind(this)]],pasajeros:["",a.k0.required],precio:["",a.k0.required],metodoPago:["",a.k0.required]})}ngOnInit(){var r,t,i;const u=localStorage.getItem("usuarioRegistrado");this.usuario=u?JSON.parse(u):null,null!==(r=this.usuario)&&void 0!==r&&r.sede&&(this.usuario.sede=this.usuario.sede.replace(/^Sede\s+/i,"")),this.crearViajeForm.patchValue({salida:(null===(t=this.usuario)||void 0===t?void 0:t.sede)||"",destino:(null===(i=this.usuario)||void 0===i?void 0:i.lugar)||""}),this.dataService.getSedes().subscribe(b=>{this.sedes=b})}validarHora(r){const t=r.value;return t&&(t<"19:00"||t>="24:00")?(this.errorDeHora(),{horaInvalida:!0}):null}errorDeHora(){var r=this;return(0,d.A)(function*(){yield(yield r.alertController.create({header:"Error",message:"Por favor, selecciona una hora entre las 19:00 y las 00:00 del d\xeda.",buttons:["OK"]})).present()})()}paraCrearViaje(){var r=this;return(0,d.A)(function*(){if(r.crearViajeForm.valid){var t;const i={salida:r.crearViajeForm.value.salida,destino:r.crearViajeForm.value.destino,hora:r.crearViajeForm.value.hora,pasajeros:r.crearViajeForm.value.pasajeros,precio:r.crearViajeForm.value.precio,metodoDePago:r.crearViajeForm.value.metodoPago};if("moto"==(null===(t=r.usuario)||void 0===t?void 0:t.tipoVehiculo)&&i.pasajeros>1)return void(yield r.errorMasPasajeros());localStorage.setItem("viajeCreado",JSON.stringify(i)),console.log("Viaje creado:",i),yield r.alertaDeViajeCreado()}else yield r.errorDeFormulario()})()}errorMasPasajeros(){var r=this;return(0,d.A)(function*(){yield(yield r.alertController.create({header:"Error",message:"No puedes elegir m\xe1s de 1 pasajeros.",buttons:["OK"]})).present()})()}alertaDeViajeCreado(){var r=this;return(0,d.A)(function*(){yield(yield r.alertController.create({header:"\xa1Viaje Creado!",message:"El viaje ha sido creado exitosamente.",buttons:["OK"]})).present(),r.router.navigate(["/viaje-creado-conductor"])})()}errorDeFormulario(){var r=this;return(0,d.A)(function*(){yield(yield r.alertController.create({header:"Error",message:"Por favor, completa todos los campos.",buttons:["OK"]})).present()})()}volver(){var r=this;return(0,d.A)(function*(){r.navController.pop()})()}}return(o=s).\u0275fac=function(r){return new(r||o)(e.rXU(n.hG),e.rXU(a.ok),e.rXU(p.Ix),e.rXU(f.u))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-create-travel"]],decls:57,vars:3,consts:[[3,"fullscreen"],["collapse","condense"],[2,"--background","rgb(231, 231, 231)","position","relative"],["id","titulo-crear-viaje","size","large"],[1,"crear-viaje"],[3,"ngSubmit","formGroup"],[1,"input-crear-viaje"],["for","sede-de-salida"],["lines","none"],["name","business-outline","slot","start",1,"text-gray-400"],["formControlName","salida","placeholder","Seleccione una sede","interface","popover"],[3,"value",4,"ngFor","ngForOf"],["for","destino"],["type","text","formControlName","destino","readonly","",1,"input-field"],["for","hora-salida"],["type","time","formControlName","hora",1,"input-field"],["for","pasajeros"],["name","people-outline","slot","start",1,"text-gray-400"],["formControlName","pasajeros","placeholder","Pasajeros","interface","popover"],["value","1"],["value","2"],["value","3"],["value","4"],["for","precio"],["type","text","formControlName","precio","placeholder","Precio del viaje",1,"input-field"],["for","pago"],["name","card-outline","slot","start",1,"text-gray-400"],["formControlName","metodoPago","placeholder","Metodo de Pago","interface","popover"],["value","Efectivo"],["value","Tajerta"],[1,"botones"],["type","submit","fill","Outline"],["fill","Outline",3,"click"],[3,"value"]],template:function(r,t){1&r&&(e.j41(0,"ion-content",0)(1,"ion-header",1)(2,"ion-toolbar",2)(3,"ion-title",3),e.EFF(4,"Crear Viaje"),e.k0s()()(),e.nrm(5,"br")(6,"br"),e.j41(7,"div",4)(8,"form",5),e.bIt("ngSubmit",function(){return t.paraCrearViaje()}),e.j41(9,"div",6)(10,"label",7),e.EFF(11,"Sede del viaje"),e.k0s(),e.j41(12,"ion-item",8),e.nrm(13,"ion-icon",9),e.j41(14,"ion-select",10),e.DNE(15,j,2,2,"ion-select-option",11),e.k0s()()(),e.j41(16,"div",6)(17,"label",12),e.EFF(18,"Destino"),e.k0s(),e.nrm(19,"input",13),e.k0s(),e.j41(20,"div",6)(21,"label",14),e.EFF(22,"Hora de salida"),e.k0s(),e.nrm(23,"input",15),e.k0s(),e.j41(24,"div",6)(25,"label",16),e.EFF(26,"Pasajeros"),e.k0s(),e.j41(27,"ion-item",8),e.nrm(28,"ion-icon",17),e.j41(29,"ion-select",18)(30,"ion-select-option",19),e.EFF(31,"1 pasajero"),e.k0s(),e.j41(32,"ion-select-option",20),e.EFF(33,"2 pasajeros"),e.k0s(),e.j41(34,"ion-select-option",21),e.EFF(35,"3 pasajeros"),e.k0s(),e.j41(36,"ion-select-option",22),e.EFF(37,"4 pasajeros"),e.k0s()()()(),e.j41(38,"div",6)(39,"label",23),e.EFF(40,"Precio"),e.k0s(),e.nrm(41,"input",24),e.k0s(),e.j41(42,"div",6)(43,"label",25),e.EFF(44,"Pago"),e.k0s(),e.j41(45,"ion-item",8),e.nrm(46,"ion-icon",26),e.j41(47,"ion-select",27)(48,"ion-select-option",28),e.EFF(49,"Efectivo"),e.k0s(),e.j41(50,"ion-select-option",29),e.EFF(51,"Tarjeta"),e.k0s()()()(),e.j41(52,"div",30)(53,"ion-button",31),e.EFF(54,"Crear Viaje"),e.k0s(),e.j41(55,"ion-button",32),e.bIt("click",function(){return t.volver()}),e.EFF(56,"Volver"),e.k0s()()()()()),2&r&&(e.Y8G("fullscreen",!0),e.R7$(8),e.Y8G("formGroup",t.crearViajeForm),e.R7$(7),e.Y8G("ngForOf",t.sedes))},dependencies:[g.Sq,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,n.Jm,n.W9,n.eU,n.iq,n.uz,n.Nm,n.Ip,n.BC,n.ai,n.Je],styles:['@charset "UTF-8";ion-content[_ngcontent-%COMP%]{--overflow: hidden;display:flex;flex-direction:column;--background: red}ion-toolbar[_ngcontent-%COMP%]   #titulo-crear-viaje[_ngcontent-%COMP%]{display:flex;justify-content:center;color:#000;padding:30px}.crear-viaje[_ngcontent-%COMP%]{background:#fff;height:600px;margin:20px 10px;border-radius:15px;display:flex;flex-direction:column;padding:20px}.input-crear-viaje[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;margin-bottom:15px}.input-crear-viaje[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:150px;margin-right:10px}.input-field[_ngcontent-%COMP%]{flex-grow:1;border:1px solid #ccc;border-radius:5px;padding:8px}.botones[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.botones[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 5px;--color: white;--background: red}.crear-viaje[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--color: white;--background: red;display:flex}.input-crear-viaje[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{width:100%}.input-crear-viaje[_ngcontent-%COMP%]   input[type=time][_ngcontent-%COMP%]{width:90%;box-sizing:border-box}@media (max-height: 667px){.crear-viaje[_ngcontent-%COMP%]{height:420px}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:10px}.botones[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{flex:1;margin:0 5px}}@media (min-height: 668px){.botones[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.botones[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;margin:5px 0}}']}),s})()}];let C=(()=>{var o;class s{}return(o=s).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.iI.forChild(h),p.iI]}),s})(),P=(()=>{var o;class s{}return(o=s).\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[g.MD,a.YN,a.X1,n.bv,C]}),s})()}}]);